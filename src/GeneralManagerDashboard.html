<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุญุฉ ุงูุชุญูู - ูุฏูุฑ ุนุงู</title>
    <?!= include('DashboardStyles'); ?>
</head>

<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-right">
                <span class="logo">๐ฌ</span>
                <span class="system-name">Seen Film</span>
            </div>
            <div class="nav-left">
                <span class="user-name" id="userName"></span>
                <span class="user-role badge-primary">ูุฏูุฑ ุนุงู</span>
                <button class="btn-logout" onclick="logout()">ุชุณุฌูู ุฎุฑูุฌ</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <!-- Header Section -->
        <div class="page-header">
            <h1>ูุฑุญุจุงู ุจูุ <span id="headerUserName"></span></h1>
            <p class="subtitle">ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ</p>
        </div>

        <!-- Stats Cards -->
        <div class="stats-grid" id="statsGrid">
            <div class="stat-card stat-primary">
                <div class="stat-icon">๐</div>
                <div class="stat-content">
                    <h3 id="totalProjects">-</h3>
                    <p>ุฅุฌูุงูู ุงููุดุงุฑูุน</p>
                </div>
            </div>

            <div class="stat-card stat-success">
                <div class="stat-icon">โ</div>
                <div class="stat-content">
                    <h3 id="activeProjects">-</h3>
                    <p>ุงููุดุงุฑูุน ุงููุดุทุฉ</p>
                </div>
            </div>

            <div class="stat-card stat-info">
                <div class="stat-icon">๐</div>
                <div class="stat-content">
                    <h3 id="totalTasks">-</h3>
                    <p>ุฅุฌูุงูู ุงูููุงู</p>
                </div>
            </div>

            <div class="stat-card stat-warning">
                <div class="stat-icon">๐ฅ</div>
                <div class="stat-content">
                    <h3 id="totalTeam">-</h3>
                    <p>ุฃุนุถุงุก ุงููุฑูู</p>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="btn btn-primary" onclick="manageUsers()">
                <span class="icon">๐ฅ</span>
                ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
            </button>
            <button class="btn btn-secondary" onclick="openSheet()">
                <span class="icon">๐</span>
                ูุชุญ Google Sheet
            </button>
            <!-- 
            <button class="btn btn-success" onclick="viewReports()">
                <span class="icon">๐</span>
                ุนุฑุถ ุงูุชูุงุฑูุฑ
            </button>
            -->
        </div>

        <!-- Two Columns Layout -->
        <div class="dashboard-grid">
            <!-- Recent Projects -->
            <div class="dashboard-card">
                <div class="card-header">
                    <h3>ุขุฎุฑ ุงููุดุงุฑูุน</h3>
                    <span class="badge badge-info" id="projectCount">0</span>
                </div>
                <div class="card-content">
                    <div id="recentProjects" class="loading">
                        <div class="loader-big"></div>
                        <p>ุฌุงุฑู ุงูุชุญููู...</p>
                    </div>
                </div>
            </div>

            <!-- Delayed Tasks -->
            <div class="dashboard-card">
                <div class="card-header">
                    <h3>ุงูููุงู ุงููุชุฃุฎุฑุฉ</h3>
                    <span class="badge badge-danger" id="delayedCount">0</span>
                </div>
                <div class="card-content">
                    <div id="delayedTasks" class="loading">
                        <div class="loader-big"></div>
                        <p>ุฌุงุฑู ุงูุชุญููู...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Task Progress -->
        <div class="dashboard-card">
            <div class="card-header">
                <h3>ุชูุฏู ุงูููุงู</h3>
            </div>
            <div class="card-content">
                <div class="progress-section">
                    <div class="progress-item">
                        <div class="progress-label">
                            <span>ุงูููุงู ุงูููุชููุฉ</span>
                            <span id="completedCount">0</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill progress-fill-success" id="completedProgress" style="width: 0%">
                            </div>
                        </div>
                    </div>
                    <div class="progress-item">
                        <div class="progress-label">
                            <span>ุงูููุงู ุงูุฌุงุฑูุฉ</span>
                            <span id="inProgressCount">0</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill progress-fill-info" id="inProgressProgress" style="width: 0%">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- User Management Modal -->
    <div id="userModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>๐ฅ ุฅุฏุงุฑุฉ ูุณุชุฎุฏูู ุงููุธุงู</h2>
                <span class="close" onclick="closeUserModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="modal-actions" style="margin-bottom: 20px;">
                    <button class="btn btn-primary" onclick="showAddUserForm()">
                        <span class="icon">โ</span> ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ
                    </button>
                </div>
                <div id="usersTableContainer" class="table-responsive">
                    <table class="data-table" style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: #f8f9fa;">
                                <th style="padding: 12px; text-align: right; border-bottom: 2px solid #dee2e6;">ุงูุงุณู
                                </th>
                                <th style="padding: 12px; text-align: right; border-bottom: 2px solid #dee2e6;">ุงูุจุฑูุฏ
                                    ุงูุฅููุชุฑููู</th>
                                <th style="padding: 12px; text-align: right; border-bottom: 2px solid #dee2e6;">ุงูุฏูุฑ
                                </th>
                                <th style="padding: 12px; text-align: right; border-bottom: 2px solid #dee2e6;">ุงููุดุงุฑูุน
                                </th>
                                <th style="padding: 12px; text-align: right; border-bottom: 2px solid #dee2e6;">ุงูุญุงูุฉ
                                </th>
                                <th style="padding: 12px; text-align: right; border-bottom: 2px solid #dee2e6;">
                                    ุงูุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody">
                            <!-- ุณูุชู ุงูุชุนุจุฆุฉ ุฏููุงููููุงู -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Add User Modal Sub -->
    <div id="addUserModal" class="modal">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h3>โ ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ</h3>
                <span class="close" onclick="closeAddUserModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="addUserFormWeb" onsubmit="submitAddUser(event)">
                    <div class="form-group" style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px;">ุงูุงุณู ุงููุงูู</label>
                        <input type="text" id="newUserName" required
                            style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    </div>
                    <div class="form-group" style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px;">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                        <input type="email" id="newUserEmail" required
                            style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    </div>
                    <div class="form-group" style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px;">ูููุฉ ุงููุฑูุฑ</label>
                        <input type="password" id="newUserPassword" required minlength="6"
                            style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    </div>
                    <div class="form-group" style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px;">ุงูุฏูุฑ</label>
                        <select id="newUserRole" onchange="toggleProjectSelect()" required
                            style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                            <option value="ูุฏูุฑ ุนุงู">ูุฏูุฑ ุนุงู</option>
                            <option value="ูุฏูุฑ ูุดุฑูุนุงุช">ูุฏูุฑ ูุดุฑูุนุงุช</option>
                        </select>
                    </div>
                    <div id="projectSelectGroup" class="form-group" style="display:none; margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px;">ุงููุดุงุฑูุน (Ctrl ูุงุฎุชูุงุฑ ูุชุนุฏุฏ)</label>
                        <select id="newUserProjects" multiple
                            style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; height: 100px;">
                            <!-- ุณูุชู ุฌูุจ ุงููุดุงุฑูุน ูู ุงูุณูุฑูุฑ -->
                        </select>
                    </div>
                    <div class="modal-footer"
                        style="padding-top: 15px; border-top: 1px solid #eee; display: flex; gap: 10px;">
                        <button type="submit" class="btn btn-primary">ุญูุธ ุงููุณุชุฎุฏู</button>
                        <button type="button" class="btn btn-secondary" onclick="closeAddUserModal()">ุฅูุบุงุก</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <?!= include('DashboardScript'); ?>
</body>

</html>